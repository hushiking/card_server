[2018-03-15 00:11:41] [ERROR] select count(`card`.`id`) as `count` from `card` as `card` limit 1
[2018-03-15 00:11:41] [ERROR] Error: Cannot enqueue Query after fatal error.
    at Protocol._validateEnqueue (/Users/zening/Desktop/card_server/node_modules/mysql/lib/protocol/Protocol.js:201:16)
    at Protocol._enqueue (/Users/zening/Desktop/card_server/node_modules/mysql/lib/protocol/Protocol.js:139:13)
    at PoolConnection.query (/Users/zening/Desktop/card_server/node_modules/mysql/lib/Connection.js:208:25)
    at /Users/zening/Desktop/card_server/node_modules/think_lib/index.js:572:16
    at Promise._execute (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/debuggability.js:303:9)
    at Promise._resolveFromExecutor (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:483:18)
    at new Promise (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:79:10)
    at /Users/zening/Desktop/card_server/node_modules/think_lib/index.js:571:16
    at connect.then.conn (/Users/zening/Desktop/card_server/node_modules/thinkorm_adapter_mysql/lib/index.js:142:20)
    at tryCatcher (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:512:31)
    at Promise._settlePromise (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:569:18)
    at Promise._settlePromiseCtx (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:606:10)
    at Async._drainQueue (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/async.js:138:12)
    at Async._drainQueues (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/async.js:143:10)
    at Immediate.Async.drainQueues [as _onImmediate] (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/async.js:17:14)
    at runCallback (timers.js:789:20)
    at tryOnImmediate (timers.js:751:5)
    at processImmediate [as _immediateCallback] (timers.js:722:5)
[2018-03-15 00:12:41] [ERROR] ReferenceError: userData is not defined
    at module.exports.getDateAction (/Users/zening/Desktop/card_server/app/controller/badge.js:64:13)
    at <anonymous>
[2018-03-15 00:12:41] [ERROR]  GET  500  /badge/getDate  530ms
[2018-03-15 00:18:36] [ERROR] ReferenceError: z is not defined
    at module.exports.getDateAction (/Users/zening/Desktop/card_server/app/controller/badge.js:38:50)
    at promises.then (/Users/zening/Desktop/card_server/node_modules/think_controller/index.js:71:29)
    at tryCatcher (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:512:31)
    at Promise._settlePromise (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:569:18)
    at Promise._settlePromise0 (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:614:10)
    at Promise._settlePromises (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/promise.js:693:18)
    at Async._drainQueue (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/async.js:133:16)
    at Async._drainQueues (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/async.js:143:10)
    at Immediate.Async.drainQueues [as _onImmediate] (/Users/zening/Desktop/card_server/node_modules/bluebird/js/release/async.js:17:14)
    at runCallback (timers.js:789:20)
    at tryOnImmediate (timers.js:751:5)
    at processImmediate [as _immediateCallback] (timers.js:722:5)
[2018-03-15 00:18:36] [ERROR]  GET  500  /badge/getDate  8ms
